!function(){"use strict";function t(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function e(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!D;t+=1)D=window[e[t]+"RequestAnimationFrame"];D||o(" RequestAnimationFrame not supported")}function n(){var t="Host page";return window.top!==window.self&&(t=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),t}function i(t){return k+"["+n()+"]"+t}function o(t){_&&"object"==typeof window.console&&console.log(i(t))}function r(t){"object"==typeof window.console&&console.warn(i(t))}function a(t){function e(){function t(){c(j),l(),S[I].resizedCallback(j)}a("Height"),a("Width"),d(t,j,"resetPage")}function n(t){var e=t.id;o(" Removing iFrame: "+e),t.parentNode.removeChild(t),S[e].closedCallback(e),delete S[e],o(" --")}function i(){var t=A.substr(C).split(":");return{iframe:document.getElementById(t[0]),id:t[0],height:t[1],width:t[2],type:t[3]}}function a(t){var e=Number(S[I]["max"+t]),n=Number(S[I]["min"+t]),i=t.toLowerCase(),r=Number(j[i]);if(n>e)throw new Error("Value for min"+t+" can not be greater than max"+t);o(" Checking "+i+" is in range "+n+"-"+e),n>r&&(r=n,o(" Set "+i+" to min value")),r>e&&(r=e,o(" Set "+i+" to max value")),j[i]=""+r}function h(){function e(){function t(){o(" Checking connection is from allowed list of origins: "+i);var t;for(t=0;t<i.length;t++)if(i[t]===n)return!0;return!1}function e(){return o(" Checking connection is from: "+r),n==r}return i.constructor===Array?t():e()}var n=t.origin,i=S[I].checkOrigin,r=j.iframe.src.split("/").slice(0,3).join("/");if(i&&""+n!="null"&&!e())throw new Error("Unexpected message received from: "+n+" for "+j.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function p(){return k===(""+A).substr(0,C)}function f(){var t=j.type in{"true":1,"false":1,undefined:1};return t&&o(" Ignoring init message from meta parent page"),t}function m(t){return A.substr(A.indexOf(":")+x+t)}function g(t){o(" MessageCallback passed: {iframe: "+j.iframe.id+", message: "+t+"}"),S[I].messageCallback({iframe:j.iframe,message:JSON.parse(t)}),o(" --")}function v(){return null===j.iframe?(r(" IFrame ("+j.id+") not found"),!1):!0}function y(t){var e=t.getBoundingClientRect();return s(),{x:parseInt(e.left,10)+parseInt(T.x,10),y:parseInt(e.top,10)+parseInt(T.y,10)}}function w(t){function e(){T=a,D(),o(" --")}function n(){return{x:Number(j.width)+i.x,y:Number(j.height)+i.y}}var i=t?y(j.iframe):{x:0,y:0},a=n();o(" Reposition requested from iFrame (offset x:"+i.x+" y:"+i.y+")"),window.top!==window.self?window.parentIFrame?t?parentIFrame.scrollToOffset(a.x,a.y):parentIFrame.scrollTo(j.width,j.height):r(" Unable to scroll to requested position, window.parentIFrame not found"):e()}function D(){!1!==S[I].scrollCallback(T)&&l()}function E(t){function e(t){var e=y(t);o(" Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),T={x:e.x,y:e.y},D(),o(" --")}var n=t.split("#")[1]||"",i=decodeURIComponent(n),r=document.getElementById(i)||document.getElementsByName(i)[0];window.top!==window.self?window.parentIFrame?parentIFrame.moveToAnchor(n):o(" In page link #"+n+" not found and window.parentIFrame not found"):r?e(r):o(" In page link #"+n+" not found")}function $(){switch(j.type){case"close":n(j.iframe);break;case"message":g(m(6));break;case"scrollTo":w(!1);break;case"scrollToOffset":w(!0);break;case"inPageLink":E(m(9));break;case"reset":u(j);break;case"init":e(),S[I].initCallback(j.iframe);break;default:e()}}function N(t){var e=!0;return S[t]||(e=!1,r(j.type+" No settings for "+t+". Message was: "+A)),e}var A=t.data,j={},I=null;p()&&(j=i(),I=j.id,!f()&&N(I)&&(_=S[I].log,o(" Received: "+A),v()&&h()&&($(),b=!1)))}function s(){null===T&&(T={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},o(" Get page position: "+T.x+","+T.y))}function l(){null!==T&&(window.scrollTo(T.x,T.y),o(" Set page position: "+T.x+","+T.y),T=null)}function u(t){function e(){c(t),h("reset","reset",t.iframe,t.id)}o(" Size reset requested by "+("init"===t.type?"host page":"iFrame")),s(),d(e,t,"init")}function c(t){function e(e){t.iframe.style[e]=t[e]+"px",o(" IFrame ("+n+") "+e+" set to "+t[e]+"px")}var n=t.iframe.id;S[n].sizeHeight&&e("height"),S[n].sizeWidth&&e("width")}function d(t,e,n){n!==e.type&&D?(o(" Requesting animation frame"),D(t)):t()}function h(t,e,n,i){n&&n.contentWindow?(o("["+t+"] Sending msg to iframe ("+e+")"),n.contentWindow.postMessage(k+e,"*")):(r("["+t+"] IFrame not found"),S[i]&&delete S[i])}function p(e){function n(){function t(t){1/0!==S[f][t]&&0!==S[f][t]&&(p.style[t]=S[f][t]+"px",o(" Set "+t+" = "+S[f][t]+"px"))}t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}function i(t){return""===t&&(p.id=t="iFrameResizer"+y++,_=(e||{}).log,o(" Added missing iframe ID: "+t+" ("+p.src+")")),t}function r(){o(" IFrame scrolling "+(S[f].scrolling?"enabled":"disabled")+" for "+f),p.style.overflow=!1===S[f].scrolling?"hidden":"auto",p.scrolling=!1===S[f].scrolling?"no":"yes"}function a(){("number"==typeof S[f].bodyMargin||"0"===S[f].bodyMargin)&&(S[f].bodyMarginV1=S[f].bodyMargin,S[f].bodyMargin=""+S[f].bodyMargin+"px")}function s(){return f+":"+S[f].bodyMarginV1+":"+S[f].sizeWidth+":"+S[f].log+":"+S[f].interval+":"+S[f].enablePublicMethods+":"+S[f].autoResize+":"+S[f].bodyMargin+":"+S[f].heightCalculationMethod+":"+S[f].bodyBackground+":"+S[f].bodyPadding+":"+S[f].tolerance+":"+S[f].enableInPageLinks+":"+S[f].resizeFrom}function l(e){t(p,"load",function(){var t=b;h("iFrame.onload",e,p),!t&&S[f].heightCalculationMethod in E&&u({iframe:p,height:0,width:0,type:"init"})}),h("init",e,p)}function c(t){if("object"!=typeof t)throw new TypeError("Options is not an object.")}function d(t){t=t||{},S[f]={},c(t);for(var e in N)N.hasOwnProperty(e)&&(S[f][e]=t.hasOwnProperty(e)?t[e]:N[e]);_=S[f].log}var p=this,f=i(p.id);d(e),r(),n(),a(),l(s())}function f(t,e){null===$&&($=setTimeout(function(){$=null,t()},e))}function m(){f(function(){for(var t in S)"parent"===S[t].resizeFrom&&h("Window resize","resize",document.getElementById(t),t)},66)}function g(){function n(t,e){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">.");p.call(t,e)}return e(),t(window,"message",a),t(window,"resize",m),function(t,e){switch(typeof e){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(e||"iframe"),function(e){n(e,t)});break;case"object":n(e,t);break;default:throw new TypeError("Unexpected data type ("+typeof e+").")}}}function v(t){t.fn.iFrameResize=function(t){return this.filter("iframe").each(function(e,n){p.call(n,t)}).end()}}var y=0,b=!0,_=!1,w="message",x=w.length,k="[iFrameSizer]",C=k.length,T=null,D=window.requestAnimationFrame,E={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},S={},$=null,N={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&v(jQuery),"function"==typeof define&&define.amd?define([],g):"object"==typeof module&&"object"==typeof module.exports?module.exports=g():window.iFrameResize=window.iFrameResize||g()}(),function(){var t;this.Betterplace||(this.Betterplace={}),(t=this.Betterplace).Iframe||(t.Iframe={}),this.Betterplace.Iframe.Utils=function(){function t(){}return t.add_onload_callback=function(t){return window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent?window.attachEvent("onload",t):void 0},t.build_query=function(t){var e,n,i;n=[];for(e in t)i=t[e],i&&n.push(e+"="+i);return n.join("&")},t}()}.call(this),_bp_iframe.load_donation_iframe=function(){"undefined"==typeof _bp_iframe.domain&&(_bp_iframe.domain="https://www.betterplace.org"),"undefined"==typeof _bp_iframe.lang&&(_bp_iframe.lang="de"),"undefined"==typeof _bp_iframe.width&&(_bp_iframe.width=600);var t=_bp_iframe.domain+"/"+_bp_iframe.lang+"/projects/"+_bp_iframe.project_id+"/iframe_donations/new?";"undefined"!=typeof _bp_iframe.background_color&&(t+="background_color="+_bp_iframe.background_color+"&"),"undefined"!=typeof _bp_iframe.color&&(t+="color="+_bp_iframe.color+"&"),t+="undefined"==typeof _bp_iframe.default_amount?"donation_amount=50&":"donation_amount="+_bp_iframe.default_amount+"&",_bp_iframe.default_data_transfer_accepted===!1&&(t+="data_transfer_accepted=false&"),"undefined"!=typeof _bp_iframe.bottom_logo&&(t+="bottom_logo="+_bp_iframe.bottom_logo+"&"),"undefined"!=typeof _bp_iframe.recurring_interval&&(t+="recurring_interval="+_bp_iframe.recurring_interval+"&"),t+="utm_campaign=external_donation_forms&",t+="utm_source=domain: "+window.location.hostname,t+="utm_medium=project_"+_bp_iframe.project_id+"&",t+="utm_content="+encodeURIComponent(window.location.href)+"&";var e=document.createElement("iframe");e.height=1200,e.width="100%",e.frameBorder=0,e.style.maxWidth=_bp_iframe.width+"px",e.style.maxHeight="none",e.style.width="100%",e.style.backgroundColor="transparent",e.allowTransparency="true",e.src=t;var n=function(){return document.getElementById("betterplace_donation_iframe")},i=function(){n().innerHTML="",n().appendChild(e),iFrameResize({},"#betterplace_donation_iframe iframe")};null==n()?Betterplace.Iframe.Utils.add_onload_callback(i):i()},_bp_iframe.load_donation_iframe();
